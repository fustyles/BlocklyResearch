<!-- 

Author : ChungYi Fu (Kaohsiung, Taiwan)   2024/10/2 01:00
https://www.facebook.com/francefu

JavaScript
https://fustyles.github.io/BlocklyResearch/Variable/ADD_VARIABLE/JavaScript.html

Python
https://fustyles.github.io/BlocklyResearch/Variable/ADD_VARIABLE/Python.html

-->

<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <title>Demo Blockly (JavaScript)</title>
	<script src="js/blockly_compressed.js"></script>
	<script src="js/blocks_compressed.js"></script>
	<script src="js/javascript_compressed.js"></script>
	<script src="js/en.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>	
</head>
<body>
<div id="blocklyDiv" style="position: absolute; left: 0px; top: 0px; height: 600px; width: 600px;">

<script>
	
	<!-- Â∑•ÂÖ∑ÁÆ±Ëá™Ë®ÇÁ©çÊú®Ë™ûÁ≥ª(en.js) -->
	
	Blockly.Msg["HELLOWORLD_NAME"] = "CUSTOM BLOCKS";
	Blockly.Msg["HELLOWORLD_MSG"] = "Alert";
	Blockly.Msg["HELLOWORLD_GET"] = "Get String";
	Blockly.Msg["HELLOWORLD_HUE"] = "100";
	
</script>

<script>
	
	<!-- Â∑•ÂÖ∑ÁÆ±Ëá™Ë®ÇÁ©çÊú®ÂÆöÁæ©ÂÖßÂÆπ(block.js) -->
	
	Blockly.Blocks['test1'] = {
	  init: function() {
		this.appendDummyInput()
		    .appendField(Blockly.Msg["HELLOWORLD_MSG"]);
		this.appendValueInput("message")
		    .setCheck(null);
		this.setInputsInline(!0);
		this.setPreviousStatement(!0);
		this.setNextStatement(!0);		  
		this.setColour(Blockly.Msg["HELLOWORLD_HUE"]);
	  }
	};
	
	Blockly.Blocks['test2'] = {
	  init: function() {
		this.appendDummyInput()
		    .appendField(Blockly.Msg["HELLOWORLD_GET"]);
		this.setInputsInline(!0);
		this.setOutput(!0);	  
		this.setColour(Blockly.Msg["HELLOWORLD_HUE"]);
	  }
	};	
	
</script>

<script>
	
	<!-- Â∑•ÂÖ∑ÁÆ±Ëá™Ë®ÇÁ©çÊú®Áî¢Âá∫Á®ãÂºèÁ¢ºÂÖßÂÆπ(javascript.js) -->

	Blockly.JavaScript.forBlock['test1'] = function(block, generator) {
		var message = generator.valueToCode(block, 'message', javascript.Order.ATOMIC);
		
		var code = 'alert(' + message + ');\n';
		return code;
	};
	
	Blockly.JavaScript.forBlock['test2'] = function(block, generator) {
		Blockly.JavaScript.definitions_['messagebox'] = 'var message = "Hello World";\n';
		
		var code = "message";
		return [code, javascript.Order.NONE];
	};	
	
</script>
	
<script>

	<!-- Â∑•ÂÖ∑ÁÆ±Á≥ªÁµ±ÁõÆÈåÑË™ûÁ≥ª(en.js) -->

	Blockly.Msg["LOGIC_NAME"] = "LOGIC";
	Blockly.Msg["LOGIC_HUE"] = "210";
	Blockly.Msg["LOOPS_NAME"] = "LOOPS";
	Blockly.Msg["LOOPS_HUE"] = "120";
	Blockly.Msg["MATH_NAME"] = "MATH";
	Blockly.Msg["MATH_HUE"] = "230";
	Blockly.Msg["TEXTS_NAME"] = "TEXTS";
	Blockly.Msg["TEXTS_HUE"] = "160";
	Blockly.Msg["LISTS_NAME"] = "LISTS";
	Blockly.Msg["LISTS_HUE"] = "260";
	Blockly.Msg["COLOUR_NAME"] = "COLOUR";
	Blockly.Msg["COLOUR_HUE"] = "20";
	Blockly.Msg["VARIABLES_NAME"] = "VARIABLES";
	Blockly.Msg["VARIABLES_HUE"] = "330";
	Blockly.Msg["PROCEDURES_NAME"] = "PROCEDURES";
	Blockly.Msg["PROCEDURES_HUE"] = "290";

	var toolbox = ''
	+ '<category name="%{BKY_LOGIC_NAME}" colour="%{BKY_LOGIC_HUE}">'
	+   '<block type="controls_if"></block>'
	+   '<block type="logic_compare"></block>'
	+   '<block type="logic_operation"></block>'
	+   '<block type="logic_negate"></block>'
	+   '<block type="logic_boolean"></block>'
	+   '<block type="logic_null"></block>'
	+   '<block type="logic_ternary"></block>'
	+ '</category>'
	+ '<category name="%{BKY_LOOPS_NAME}" colour="%{BKY_LOOPS_HUE}">'
	+   '<block type="controls_repeat_ext">'
	+     '<value name="TIMES">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">10</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="controls_whileUntil"></block>'
	+   '<block type="controls_for">'
	+     '<value name="FROM">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">1</field>'
	+       '</shadow>'
	+     '</value>'
	+     '<value name="TO">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">10</field>'
	+       '</shadow>'
	+     '</value>'
	+     '<value name="BY">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">1</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="controls_forEach"></block>'
	+   '<block type="controls_flow_statements"></block>'
	+ '</category>'
	+ '<category name="%{BKY_MATH_NAME}" colour="%{BKY_MATH_HUE}">'
	+   '<block type="math_number" gap="32">'
	+     '<field name="NUM">123</field>'
	+   '</block>'
	+   '<block type="math_arithmetic">'
	+     '<value name="A">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">1</field>'
	+       '</shadow>'
	+     '</value>'
	+     '<value name="B">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">1</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="math_single">'
	+     '<value name="NUM">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">9</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="math_trig">'
	+     '<value name="NUM">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">45</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="math_constant"></block>'
	+   '<block type="math_number_property">'
	+     '<value name="NUMBER_TO_CHECK">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">0</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="math_round">'
	+     '<value name="NUM">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">3.1</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="math_on_list"></block>'
	+   '<block type="math_modulo">'
	+     '<value name="DIVIDEND">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">64</field>'
	+       '</shadow>'
	+     '</value>'
	+     '<value name="DIVISOR">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">10</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="math_constrain">'
	+     '<value name="VALUE">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">50</field>'
	+       '</shadow>'
	+     '</value>'
	+     '<value name="LOW">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">1</field>'
	+       '</shadow>'
	+     '</value>'
	+     '<value name="HIGH">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">100</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="math_random_int">'
	+     '<value name="FROM">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">1</field>'
	+       '</shadow>'
	+     '</value>'
	+     '<value name="TO">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">100</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="math_random_float"></block>'
	+ '</category>'
	+ '<category name="%{BKY_TEXTS_NAME}" colour="%{BKY_TEXTS_HUE}">'
	+   '<block type="text"></block>'
	+   '<block type="text_join"></block>'
	+   '<block type="text_append">'
	+     '<value name="TEXT">'
	+       '<shadow type="text"></shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="text_length">'
	+     '<value name="VALUE">'
	+       '<shadow type="text">'
	+         '<field name="TEXT">abc</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="text_isEmpty">'
	+     '<value name="VALUE">'
	+       '<shadow type="text">'
	+         '<field name="TEXT"></field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="text_indexOf">'
	+     '<value name="VALUE">'
	+       '<block type="variables_get">'
	+         '<field name="VAR">text</field>'
	+       '</block>'
	+     '</value>'
	+     '<value name="FIND">'
	+       '<shadow type="text">'
	+         '<field name="TEXT">abc</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="text_charAt">'
	+     '<value name="VALUE">'
	+       '<block type="variables_get">'
	+         '<field name="VAR">text</field>'
	+       '</block>'
	+     '</value>'
	+   '</block>'
	+   '<block type="text_getSubstring">'
	+     '<value name="STRING">'
	+       '<block type="variables_get">'
	+         '<field name="VAR">text</field>'
	+       '</block>'
	+     '</value>'
	+   '</block>'
	+   '<block type="text_changeCase">'
	+     '<value name="TEXT">'
	+       '<shadow type="text">'
	+         '<field name="TEXT">abc</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="text_trim">'
	+     '<value name="TEXT">'
	+       '<shadow type="text">'
	+         '<field name="TEXT">abc</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="text_count">'
	+     '<value name="SUB">'
	+       '<shadow type="text"></shadow>'
	+     '</value>'
	+     '<value name="TEXT">'
	+       '<shadow type="text"></shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="text_replace">'
	+     '<value name="FROM">'
	+       '<shadow type="text"></shadow>'
	+     '</value>'
	+     '<value name="TO">'
	+       '<shadow type="text"></shadow>'
	+     '</value>'
	+     '<value name="TEXT">'
	+       '<shadow type="text"></shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="text_reverse">'
	+     '<value name="TEXT">'
	+       '<shadow type="text"></shadow>'
	+     '</value>'
	+   '</block>'
	+   '<label text="Input/Output:" web-class="ioLabel"></label>'
	+   '<block type="text_print">'
	+     '<value name="TEXT">'
	+       '<shadow type="text">'
	+         '<field name="TEXT">abc</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="text_prompt_ext">'
	+     '<value name="TEXT">'
	+       '<shadow type="text">'
	+         '<field name="TEXT">abc</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+ '</category>'
	+ '<category name="%{BKY_LISTS_NAME}" colour="%{BKY_LISTS_HUE}">'
	+   '<block type="lists_create_with">'
	+     '<mutation items="0"></mutation>'
	+   '</block>'
	+   '<block type="lists_create_with"></block>'
	+   '<block type="lists_repeat">'
	+     '<value name="NUM">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">5</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="lists_length"></block>'
	+   '<block type="lists_isEmpty"></block>'
	+   '<block type="lists_indexOf">'
	+     '<value name="VALUE">'
	+       '<block type="variables_get">'
	+         '<field name="VAR">list</field>'
	+       '</block>'
	+     '</value>'
	+   '</block>'
	+   '<block type="lists_getIndex">'
	+     '<value name="VALUE">'
	+       '<block type="variables_get">'
	+         '<field name="VAR">list</field>'
	+       '</block>'
	+     '</value>'
	+   '</block>'
	+   '<block type="lists_setIndex">'
	+     '<value name="LIST">'
	+       '<block type="variables_get">'
	+         '<field name="VAR">list</field>'
	+       '</block>'
	+     '</value>'
	+   '</block>'
	+   '<block type="lists_getSublist">'
	+     '<value name="LIST">'
	+       '<block type="variables_get">'
	+         '<field name="VAR">list</field>'
	+       '</block>'
	+     '</value>'
	+   '</block>'
	+   '<block type="lists_split">'
	+     '<value name="DELIM">'
	+       '<shadow type="text">'
	+         '<field name="TEXT">,</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+   '<block type="lists_sort"></block>'
	+   '<block type="lists_reverse"></block>'
	+ '</category>'
	+ '<category name="%{BKY_COLOUR_NAME}" colour="%{BKY_COLOUR_HUE}">'
	+   '<block type="colour_picker"></block>'
	+   '<block type="colour_random"></block>'
	+   '<block type="colour_blend">'
	+     '<value name="COLOUR1">'
	+       '<shadow type="colour_picker">'
	+         '<field name="COLOUR">#ff0000</field>'
	+       '</shadow>'
	+     '</value>'
	+     '<value name="COLOUR2">'
	+       '<shadow type="colour_picker">'
	+         '<field name="COLOUR">#3333ff</field>'
	+       '</shadow>'
	+     '</value>'
	+     '<value name="RATIO">'
	+       '<shadow type="math_number">'
	+         '<field name="NUM">0.5</field>'
	+       '</shadow>'
	+     '</value>'
	+   '</block>'
	+ '</category>'
	+ '<sep></sep>'
	+ '<category name="%{BKY_VARIABLES_NAME}" colour="%{BKY_VARIABLES_HUE}" custom="VARIABLE"></category>'
	+ '<category name="%{BKY_PROCEDURES_NAME}" colour="%{BKY_PROCEDURES_HUE}" custom="PROCEDURE"></category>';
	
</script>

<xml id="toolbox" style="display: none">
	<!-- Â∑•ÂÖ∑ÁÆ±Á≥ªÁµ±Á©çÊú®XMLÁµêÊßãÂÖßÂÆπ -->	
	<script>
		document.write(toolbox);
	</script>
	
	<sep></sep>
	
	<!-- Â∑•ÂÖ∑ÁÆ±Ëá™Ë®ÇÁ©çÊú®XMLÁµêÊßãÂÖßÂÆπ(toolbox.xml) -->
	
	<category name="%{BKY_HELLOWORLD_NAME}" colour="%{BKY_HELLOWORLD_HUE}">
		<block type="test1">
			<value name="message">
				<block type="text">
					<field name="TEXT">Hello World</field>
				</block>
			</value> 		
		</block>
		<block type="test2">		
		</block>		
	</category>
</xml>
	
<xml id="startBlocks" style="display: none">
	<!-- Â∑•‰ΩúÂçÄÂàùÂßãÁ©çÊú®XMLÁµêÊßãÂÖßÂÆπ -->

	<block type="test1" x="100" y="100">
		<value name="message">
			<block type="text">
				<field name="TEXT">Hello World</field>
			</block>
		</value> 		
	</block>	
</xml>

<script>	

	//ÂúñÁ§∫Èü≥ÊïàÂ™íÈ´îË≥áÊñôÂ§æË∑ØÂæë
	var media = 'media/';

	//Â∑•‰ΩúÂçÄÂàùÂßãÂåñ
	var demoWorkspace = Blockly.inject(
		'blocklyDiv'
		,{
			media: media, 
			toolbox: document.getElementById('toolbox'),
			zoom:{
				controls: true,
				wheel: false,
				startScale: 1.0,
				maxScale: 3,
				minScale: 0.3,
				scaleSpeed: 1.2
			},
			move: {
				scrollbars: {
				  horizontal: true,
				  vertical: true
				},
				drag: true,
				wheel: true
			},
			trashcan: true
		}
	);

	//ÂàùÂßãÁ©çÊú®ÂåØÂÖ•Â∑•‰ΩúÂçÄ
	function startBlocks() {
		Blockly.getMainWorkspace().clear();
		Blockly.Xml.domToWorkspace(document.getElementById('startBlocks'), demoWorkspace);
	}
	startBlocks();

	//Áõ£ËÅΩÂ∑•‰ΩúÂçÄÊîπËÆäËº∏Âá∫Á®ãÂºèÁ¢º
	function onWorkspaceChanged(event) {
		var code = Blockly.JavaScript.workspaceToCode(demoWorkspace);
		console.clear();
		console.log(code);
	}
	demoWorkspace.addChangeListener(onWorkspaceChanged);

	//Âü∑Ë°åÂ∑•‰ΩúÂçÄÁ®ãÂºèÁ¢º
	function runCode() {
		var code = Blockly.JavaScript.workspaceToCode(demoWorkspace);
		try {
			eval(code);
		} catch (e) {
			alert(e);
		}
	}
	
	//Â∑•‰ΩúÂçÄÂåØÂá∫Á∂≤È†ÅHTMLÊ™îÊ°à
	function workspaceExportToHTML() {
		  try {
			var code = Blockly.JavaScript.workspaceToCode(demoWorkspace);
			var html ='<!DOCTYPE HTML>\n' +
					  '<html>\n' +
					  '<head>\n' +
					  '  <meta charset="utf-8">\n' +
					  '  <title>Demo Blockly</title>\n' +
					  '<\/head>\n' +
					  '<body>\n' +
					  '<script>\n';
			html += code;
			html +=           '<\/script>\n' +			
					  '<\/body>\n' +
					  '<\/html>';
					
			var link = document.createElement('a');
			link.download="index.html";
			link.href="data:application/octet-stream;utf-8," + encodeURIComponent(html);
			document.body.appendChild(link);
			link.click();
			link.remove();
		  } catch (e) {
			window.location.href="data:application/octet-stream;utf-8," + encodeURIComponent(xml);
			alert(e);
		  }		
	}	

	//Â∑•‰ΩúÂçÄÂåØÂá∫Á©çÊú®ÁµêÊßãXMLÊ™îÊ°à
	function workspaceExportToXML() {
		  try {
			var xml = Blockly.Xml.workspaceToDom(demoWorkspace);
			xml = Blockly.utils.xml.domToText(xml);

			var link = document.createElement('a');
			link.download="test.xml";
			link.href="data:application/octet-stream;utf-8," + encodeURIComponent(xml);
			document.body.appendChild(link);
			link.click();
			link.remove();
		  } catch (e) {
			window.location.href="data:application/octet-stream;utf-8," + encodeURIComponent(xml);
			alert(e);
		  }		
	}

	//Â∑•‰ΩúÂçÄÂåØÂÖ•Á©çÊú®ÁµêÊßãXMLÊ™îÊ°à
	function workspaceImportFromXML() {
		var inputId = "importBlocks";
		var e = document.getElementById(inputId);
		if (e) {
			e.click();
			return;
		}

		var input = document.createElement('input');
		input.type = "file";
		input.id = inputId;
		input.style.display = "none";
		input.accept = ".xml";
		input.onchange = function(element) {
			try {	
				var file = this.files[0];
				if (file) {
					var fr = new FileReader();           
					fr.onload = function (event) {
						Blockly.getMainWorkspace().clear();
						var blocks = Blockly.utils.xml.textToDom(event.target.result);
						Blockly.Xml.domToWorkspace(blocks, demoWorkspace);
					};
					fr.readAsText(file);
				}
			} catch (e) {
				alert(e);
			}	  
		}

		document.body.appendChild(input);
		setTimeout(function(){
			input.click();
		},500);	
	}	

	//Êñ∞Â¢ûÂ∑•‰ΩúÂçÄÂäüËÉΩÈÅ∏ÂñÆ ÈáçË®≠Â∑•‰ΩúÂçÄ
	Blockly.Msg["WORKSPACE_RESET"] = "üëª Reset Workspace";
	function registerWorkspaceReset() {
	  if (Blockly.ContextMenuRegistry.registry.getItem('workspace_reset')) {
		return;
	  }
	  const workspaceReset = {
		displayText: function(){
			return Blockly.Msg["WORKSPACE_RESET"];
		},
		preconditionFn: function(a) {
			return 'enabled';
		},
		callback: function(a) {
			startBlocks();
		},
		scopeType: Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,id: 'workspace_reset',
		weight: 200,
	  };
	  Blockly.ContextMenuRegistry.registry.register(workspaceReset);
	}
	registerWorkspaceReset();

	//Êñ∞Â¢ûÂ∑•‰ΩúÂçÄÂäüËÉΩÈÅ∏ÂñÆ ÂåØÂá∫Á©çÊú®ÁµêÊßãXMLÊ™î
	Blockly.Msg["WORKSPACE_BLOCKS_EXPORT_XML_MSG"] = "üëª Export Workspace Blocks as XML File";
	function registerWorkspaceBlocksExportToXML() {
	  if (Blockly.ContextMenuRegistry.registry.getItem('workspace_blocks_export_xml')) {
		return;
	  }
	  const workspaceBlocksExportToXML = {
		displayText: function(){
			return Blockly.Msg["WORKSPACE_BLOCKS_EXPORT_XML_MSG"];
		},
		preconditionFn: function(a) {
			return 'enabled';
		},
		callback: function(a) {
			workspaceExportToXML();
		},
		scopeType: Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,id: 'workspace_blocks_export_xml',
		weight: 201,
	  };
	  Blockly.ContextMenuRegistry.registry.register(workspaceBlocksExportToXML);
	}
	registerWorkspaceBlocksExportToXML();

	//Êñ∞Â¢ûÂ∑•‰ΩúÂçÄÂäüËÉΩÈÅ∏ÂñÆ ÂåØÂÖ•Á©çÊú®ÁµêÊßãXMLÊ™î
	Blockly.Msg["WORKSPACE_BLOCKS_IMPORT_XML_MSG"] = "üëª Import Workspace Blocks from XML File";
	function registerWorkspaceBlocksImportFromXML() {
	  if (Blockly.ContextMenuRegistry.registry.getItem('workspace_blocks_import_xml')) {
		return;
	  }
	  const workspaceBlocksImportFromXML = {
		displayText: function(){
			return Blockly.Msg["WORKSPACE_BLOCKS_IMPORT_XML_MSG"];
		},
		preconditionFn: function(a) {
			return 'enabled';
		},
		callback: function(a) {
			workspaceImportFromXML();
		},
		scopeType: Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,id: 'workspace_blocks_import_xml',
		weight: 202,
	  };
	  Blockly.ContextMenuRegistry.registry.register(workspaceBlocksImportFromXML);
	}
	registerWorkspaceBlocksImportFromXML();
	
	//Êñ∞Â¢ûÂ∑•‰ΩúÂçÄÂäüËÉΩÈÅ∏ÂñÆ ÂåØÂá∫Á∂≤È†ÅHTMLÊ™î
	Blockly.Msg["WORKSPACE_BLOCKS_EXPORT_HTML_MSG"] = "üëª Export Workspace as HTML File";
	function registerWorkspaceBlocksExportToHTML() {
	  if (Blockly.ContextMenuRegistry.registry.getItem('workspace_blocks_export_html')) {
		return;
	  }
	  const workspaceBlocksExportToHTML = {
		displayText: function(){
			return Blockly.Msg["WORKSPACE_BLOCKS_EXPORT_HTML_MSG"];
		},
		preconditionFn: function(a) {
			return 'enabled';
		},
		callback: function(a) {
			workspaceExportToHTML();
		},
		scopeType: Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,id: 'workspace_blocks_export_html',
		weight: 203,
	  };
	  Blockly.ContextMenuRegistry.registry.register(workspaceBlocksExportToHTML);
	}
	registerWorkspaceBlocksExportToHTML();

	//Êñ∞Â¢ûÂ∑•‰ΩúÂçÄÂäüËÉΩÈÅ∏ÂñÆ Âü∑Ë°åÁ©çÊú®Á®ãÂºèÁ¢º
	Blockly.Msg["WORKSPACE_RUNCODE"] = "üëª Run the Code";
	function registerRunCode() {
	  if (Blockly.ContextMenuRegistry.registry.getItem('workspace_run_code')) {
		return;
	  }
	  const workspaceRunCode = {
		displayText: function(){
			return Blockly.Msg["WORKSPACE_RUNCODE"];
		},
		preconditionFn: function(a) {
			return 'enabled';
		},
		callback: function(a) {
			runCode();
		},
		scopeType: Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,id: 'workspace_run_code',
		weight: 204,
	  };
	  Blockly.ContextMenuRegistry.registry.register(workspaceRunCode);
	} 
	registerRunCode();

	//Â∑•‰ΩúÂçÄÁØÑÂúçÊúÄÂ§ßÂåñ
	function workspaceResize() {
		if (document.documentElement.clientWidth)
			var workspaceWidth = document.documentElement.clientWidth;
		else
			var workspaceWidth = document.body.clientWidth;
		if (document.documentElement.clientHeight)
			var workspaceHeight = document.documentElement.clientHeight-1;
		else
			var workspaceHeight = document.body.clientHeight-1;
		document.getElementById('blocklyDiv').style.width = workspaceWidth +"px";
		document.getElementById('blocklyDiv').style.height = workspaceHeight +"px";
		Blockly.svgResize(demoWorkspace);
	}

	document.addEventListener("DOMContentLoaded", function(event) {
		workspaceResize();
	})

	window.addEventListener("resize", function(){
		workspaceResize();
	})

</script>
</body>
</html>
